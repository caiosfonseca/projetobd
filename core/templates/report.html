{% extends 'base.html' %}

{% block title %}Check {% endblock %}
{% load staticfiles %}
{% block body_class %}menu-behind{% endblock %}
{% block body_content %}
    <div class="page-container">
        {% include 'header_nav.html' %}
        <div class="page-content-wrapper index_size bg-white">
            <div class="container-fluid container-fixed-lg">
                <h1 id="checkin_title">Relatório{% block checkin_title %}{% endblock %}</h1>
                <hr>
                <div class="col-md-10 center_aligned report_form_inputs">
                    <form role="form">
                        <div id="myDatepicker" class="input-group date report_inputs">
                            <input type="text" class="form-control" id="date_input" placeholder="Data">
                            <span class="input-group-addon cursor_pointer"><i class="fa fa-calendar"></i>
                            </span>
                        </div>
                        <div class="form-group report_inputs">
                            <select class="select_box" id="select_month" placeholder="Mês" data-init-plugin="select2">
                                <option value="-">Selecione o mês</option>
                                {% for abr, name in months %}
                                    <option value="{{ abr }}">{{ name }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="form-group report_inputs">
                            <select class="select_box" id="select_year" placeholder="Mês" data-init-plugin="select2">
                                <option value="-">Selecione o ano</option>
                                {% for year in years %}
                                    <option value="{{ year }}">{{ year }}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </form>
                </div>

                {% if data %}
                    <div id="my_chart" class="col-md-10 center_aligned" my_data="{{ data }}">
                        <div id="nvd3_chart" class="line-chart" 
                          data-line-color="success" 
                          data-area-color="master"
                          data-points="true" 
                          data-point-color="white" 
                          data-stroke-width="2">
                            <svg></svg>
                        </div>
                    </div>
                {% endif %}
            </div>
        </div>
        {% include "footer_nav.html" %}
    </div>
{% endblock %}
{% block body_script %}
    <script src="{% static 'assets/js/js-cookie.js' %}"></script>
    <script src="{% static 'assets/js/notifications.js' %}" type="text/javascript"></script>
    <script src="{% static 'assets/js/datatables.js' %}" type="text/javascript"></script>
    <script type="text/javascript">
        return_data();

        function return_data(){
            var myJSONList = (("{{data}}").replace(/&(l|g|quo)t;/g, function(a,b){
                        return {
                            l   : '<',
                            g   : '>',
                            quo : '"'
                        }[b];
                    }));

            myData = JSON.parse( myJSONList );
            data_values = myData["values"];
            chart_type = myData["key"];
            report_type = "user";
        }
    </script>
    <script src="{% static 'assets/js/report.js' %}" type="text/javascript"></script>
{% endblock %}